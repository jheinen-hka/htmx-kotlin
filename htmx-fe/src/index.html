<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="HTMX in Kotlin for Projektarbeit 2 in Master">
    <meta name="author" content="Josiah Heinen - hejo1030 - 61728">
    <title>HTMX Kotlin Demo Dashboard</title>

    <!-- Pico.css for base styling and components -->
    <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css">

    <!-- Custom styling on top of Pico -->
    <link rel="stylesheet" href="./style.css">

    <!-- HTMX via CDN -->
    <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.7"></script>
    <script>
        // Allow cross-origin requests to the Kotlin backend running on localhost:8080
        htmx.config.selfRequestsOnly = false;
    </script>
</head>
<body>
<main class="container dashboard">
    <header class="hero">
        <div class="hero-text">
            <span class="badge">HTMX + Kotlin</span>
            <h1>Interactive Demo Dashboard</h1>
            <p>
                A small dashboard that demonstrates HTML-over-the-wire with HTMX
                and a Kotlin / Spring Boot backend. The same services can be used
                by JSON APIs and the HTMX-based UI.
            </p>
        </div>
    </header>

    <section class="grid">
        <!-- Message Center card -->
        <article class="card card-primary">
            <header>
                <h2>Message Center</h2>
                <p class="subtitle">
                    A simple message board that demonstrates server-rendered HTML fragments.
                </p>
            </header>

            <section>
                <!-- New message form -->
                <form class="compact-form"
                      id="new-message-form"
                      hx-post="http://localhost:8080/htmx/add-message"
                      hx-target="#messages"
                      hx-swap="innerHTML"
                      hx-on::after-request="if(event.detail.successful) this.reset()">
                    <label>
                        <span class="field-label">New message</span>
                        <input type="text"
                               name="message"
                               placeholder="Type a message and press Enter"
                               required>
                    </label>
                    <button type="submit" class="primary">
                        Send
                    </button>
                </form>

                <!-- Toolbar -->
                <div class="toolbar">
                    <button class="secondary outline small"
                            hx-get="http://localhost:8080/htmx/messages"
                            hx-target="#messages"
                            hx-swap="innerHTML"
                            hx-indicator="#messages-indicator">
                        ↻ Refresh
                    </button>
                    <span id="messages-indicator"
                          class="loading-indicator"
                          aria-hidden="true"></span>
                    <small class="toolbar-hint">
                        Messages are fully rendered on the server and swapped into this card.
                    </small>
                </div>

                <!-- Messages list loaded via HTMX -->
                <div id="messages"
                     class="message-list"
                     hx-get="http://localhost:8080/htmx/messages"
                     hx-trigger="load"
                     hx-indicator="#messages-indicator">
                    Loading messages...
                </div>
            </section>
        </article>

        <!-- Task Board card -->
        <article class="card">
            <header>
                <h2>Task Board</h2>
                <p class="subtitle">
                    A small task list that demonstrates CRUD-style interactions with HTMX.
                </p>
            </header>

            <section>
                <!-- Create task form -->
                <form class="compact-form"
                      hx-post="http://localhost:8080/htmx/tasks"
                      hx-target="#task-list"
                      hx-swap="outerHTML"
                      hx-on::after-request="if(event.detail.successful) this.reset()">
                    <label>
                        <span class="field-label">New task</span>
                        <input type="text"
                               name="title"
                               placeholder="Describe a task"
                               required>
                    </label>
                    <button type="submit" class="secondary">
                        Add task
                    </button>
                </form>

                <!-- Toolbar for loading tasks -->
                <div class="toolbar">
                    <button class="secondary outline small"
                            hx-get="http://localhost:8080/htmx/tasks"
                            hx-target="#task-list"
                            hx-swap="outerHTML"
                            hx-indicator="#tasks-indicator">
                        Load tasks
                    </button>
                    <span id="tasks-indicator"
                          class="loading-indicator"
                          aria-hidden="true"></span>
                    <small class="toolbar-hint">
                        Tasks are rendered on the server. Toggle and delete actions are provided
                        by HTMX attributes in the server response.
                    </small>
                </div>

                <!-- Task list container: replaced by backend -->
                <div id="task-list"
                     class="placeholder-box"
                     hx-get="http://localhost:8080/htmx/tasks"
                     hx-trigger="load"
                     hx-swap="outerHTML"
                     hx-indicator="#tasks-indicator">
                    <p class="muted">
                        The initial task list is loaded from the backend when this card becomes visible.
                    </p>
                </div>
            </section>
        </article>

        <!-- User Card: CRUD for a richer user object -->
        <article class="card">
            <header>
                <h2>User Card</h2>
                <p class="subtitle">
                    Demonstrates CRUD operations for a richer domain object with multiple fields.
                    Each row can be edited inline via HTMX.
                </p>
            </header>

            <section>
                <!-- Create user form -->
                <form class="user-form"
                      hx-post="http://localhost:8080/htmx/users"
                      hx-target="#user-list"
                      hx-swap="outerHTML"
                      hx-on::after-request="if(event.detail.successful) this.reset()">
                    <div class="user-form-row">
                        <label>
                            <span class="field-label">First name</span>
                            <input type="text"
                                   name="firstName"
                                   placeholder="First name"
                                   required>
                        </label>
                        <label>
                            <span class="field-label">Last name</span>
                            <input type="text"
                                   name="lastName"
                                   placeholder="Last name"
                                   required>
                        </label>
                    </div>
                    <div class="user-form-row">
                        <label>
                            <span class="field-label">Age</span>
                            <input type="number"
                                   name="age"
                                   min="0"
                                   max="130"
                                   placeholder="Age">
                        </label>
                        <label>
                            <span class="field-label">Gender</span>
                            <select name="gender">
                                <option value="">Select gender</option>
                                <option value="FEMALE">Female</option>
                                <option value="MALE">Male</option>
                                <option value="OTHER">Other</option>
                                <option value="UNKNOWN">Prefer not to say</option>
                            </select>
                        </label>
                    </div>
                    <button type="submit" class="secondary">
                        Create user
                    </button>
                </form>

                <!-- Toolbar for loading users -->
                <div class="toolbar">
                    <button class="secondary outline small"
                            hx-get="http://localhost:8080/htmx/users"
                            hx-target="#user-list"
                            hx-swap="outerHTML"
                            hx-indicator="#users-indicator">
                        Load users
                    </button>
                    <span id="users-indicator"
                          class="loading-indicator"
                          aria-hidden="true"></span>
                    <small class="toolbar-hint">
                        User details, edit and delete actions are rendered on the server as HTMX-enabled HTML.
                    </small>
                </div>

                <!-- User list container: replaced by backend -->
                <div id="user-list"
                     class="placeholder-box"
                     hx-get="http://localhost:8080/htmx/users"
                     hx-trigger="load"
                     hx-swap="outerHTML"
                     hx-indicator="#users-indicator">
                    <p class="muted">
                        The initial list of users will be loaded from the backend. Each row provides
                        edit and delete actions rendered by the server.
                    </p>
                </div>
            </section>
        </article>

        <!-- Live User Search card (backend can be added later) -->
        <article class="card">
            <header>
                <h2>Live User Search (planned)</h2>
                <p class="subtitle">
                    Live search powered by HTMX with debounced requests.
                </p>
            </header>

            <section>
                <label>
                    <span class="field-label">Search term</span>
                    <input id="user-search-input"
                           type="search"
                           name="q"
                           placeholder="Start typing to search"
                           hx-get="http://localhost:8080/htmx/users/search"
                           hx-target="#user-search-results"
                           hx-trigger="keyup changed delay:300ms"
                           hx-indicator="#user-search-indicator">
                </label>

                <div class="toolbar">
                    <span id="user-search-indicator"
                          class="loading-indicator"
                          aria-hidden="true"></span>
                    <small class="toolbar-hint">
                        HTMX will send <code>?q=...</code> to <code>/htmx/users/search</code>
                        after you stop typing. The backend endpoint can be implemented later.
                    </small>
                </div>

                <div id="user-search-results" class="placeholder-box">
                    <p class="muted">
                        This area will show a server-rendered HTML fragment, for example
                        a list of matching users.
                    </p>
                </div>
            </section>
        </article>
    </section>

    <footer class="footer">
        <small>Project: HTMX in Kotlin · Projektarbeit 2</small>
        <small>Backend: Spring Boot (Kotlin) · Frontend: HTMX + Pico.css</small>
    </footer>
</main>
</body>
</html>
